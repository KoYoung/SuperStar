<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="themes/bootstrap/easyui.css"
	type="text/css"></link>
<link rel="stylesheet" href="themes/icon.css" type="text/css"></link>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="jquery.easyui.min.js"></script>
<script type="text/javascript" src="easyui-lang-zh_CN.js"></script>
</head>
<body>
	<table id="proDataGrid"></table>
	<div id="toolbar">
		<a id="addBtn" href="javascript:void(0)" class="easyui-linkbutton"
			data-options="iconCls:'icon-save'">澧炲姞</a> <a id="deleteBtn"
			href="javascript:void(0)" class="easyui-linkbutton"
			data-options="iconCls:'icon-save'">鍒犻櫎</a>
	</div>
	<div id="handlerDialog">
		<form id="myForm" method="post">
			<table width="100%" class="formtable">
				<tr>
					<th height="25">瀛︾敓缂栧彿锛�/th>
					<td><input id="stuID">
					</td>
				</tr>
				<tr>
					<th height="25">瀛︾敓濮撳悕锛�/th>
					<td><input id="stuName">
					</td>
				</tr>
				<tr>
					<th height="25">瀛︾敓骞撮緞锛�/th>
					<td><input id="stuAge">
					</td>
				</tr>
			</table>
		</form>
	</div>
	<script type="text/javascript">
		$(function() {//鍦ㄩ〉闈㈠姞杞芥椂璋冪敤姝ゅ尶鍚嶅嚱鏁�
			$("#addBtn").click(function() {//ID涓篴ddBtn鐨�a>鍏冪礌娣诲姞click浜嬩欢
				//褰揳ddBtn琚偣鍑绘椂锛岃皟鐢ㄦā鎬佹鐨勬墦寮�柟娉�鎵撳紑ID涓篽andlerDialog鐨勬ā鎬佹
				$('#handlerDialog').dialog("open");
			});//addBtn鐨刢lick浜嬩欢缁撴潫
			$("#deleteBtn")
					.click(
							function() {//缁橧D涓篸eleteBtn鐨�a>鍏冪礌娣诲姞click浜嬩欢
								var rows = $('#proDataGrid').datagrid(
										"getSelections");//鑾峰彇閫変腑鐨勮 鍙互鏄琛屾暟鎹�
								if (rows.length > 0) {//鍒ゆ柇閫変腑鏄惁瀛樺湪閫変腑琛�
									var ids = new Array();//鍒涘缓涓�釜鏁扮粍
									for ( var i = 0; i < rows.length; i++) {//鍒涘缓涓�釜鍙橀噺鍙栧�鑼冨洿涓篬0,rows.length)鐨刦or寰幆
										ids.push(rows[i].productid);//寰幆閬嶅巻 灏嗛�涓鍏冪礌鐨勪骇鍝佺紪鍙锋斁鍏ュ埌鏁扮粍涓�
									}//寰幆缁撴潫
									$
											.post(
													//閫氳繃jQuery浠ost鏂瑰紡鎻愪氦
													"ok.result",//鎸囧畾鎻愪氦璺緞
													{
														ids : ids.join(",")
													},//閫氳繃鏁扮粍鐨刯oin鏂规硶灏嗘暟缁勪腑鐨勬暟鎹斁鍒板瓧绗︿覆涓紝浠�,'鍒嗗壊
													function(data) {//璇锋眰鎴愬姛鏃惰皟鐢ㄧ殑鍑芥暟,data涓鸿姹傚埌鐨勬暟鎹�
														if (data == "ok") {//鍒ゆ柇杩斿洖鐨勬暟鎹槸鍚︿负OK
															//鍒涘缓涓�釜鍙橀噺鍙栧�鑼冨洿涓篬0,rows.length)鐨刦or閫掑噺寰幆
															for ( var j = rows.length - 1; j >= 0; j--) {
																//鑾峰彇杩欎釜row鎵�湪鐨勭储寮曞彿
																var index = $(
																		'#proDataGrid')
																		.datagrid(
																				"getRowIndex",
																				rows[j]);
																//鍒犻櫎绱㈠紩鍙蜂负index鐨勮
																$(
																		'#proDataGrid')
																		.datagrid(
																				"deleteRow",
																				index);
															}//缁撴潫閬嶅巻
														}//缁撴潫鍒ゆ柇
													});//鍥炶皟鍑芥暟缁撴潫
								} else {//涓嶅瓨鍦ㄩ�涓鏃�
									alert("璇烽�涓竴鏉℃暟鎹繘琛屽垹闄ゆ搷浣�");
								}//缁撴潫鍒ゆ柇
							});//deleteBtn鐨刢lick浜嬩欢缁撴潫
			//-----------------鍗庝附涓界殑鍒嗗壊绾�---------------------
			//妯℃�妗嗘彃浠�
			$('#handlerDialog').dialog({
				title : '瀛︾敓娣诲姞',//妯℃�妗嗘爣棰�
				iconCls : 'icon-save',//妯℃�妗嗘爣棰樺浘鏍�
				width : 400,//妯℃�妗嗗搴�
				height : 200,//妯℃�妗嗛珮搴�
				top : 100,//妯℃�妗嗚窛绂婚《閮ㄧ殑璺濈
				closed : true,//妯℃�妗嗘槸鍚﹀彲浠ヨ鍏抽棴
				cache : false,//鏄惁缂撳瓨,濡傛灉涓簍rue锛屽湪瓒呴摼鎺ヨ浇鍏ユ椂缂撳瓨闈㈡澘鍐呭
				modal : true,//瀹氫箟鏄惁灏嗙獥浣撴樉绀轰负妯″紡鍖栫獥鍙�
				buttons : [ {//瀵硅瘽妗嗙獥鍙ｅ簳閮ㄦ寜閽粍
					text : '淇濆瓨',//鎸夐挳鍐呴儴鏂囨湰鍐呭
					iconCls : 'icon-save',//鎸夐挳鍥炬爣
					handler : function() {//涓烘寜閽粦瀹氬嚱鏁�
						$('#myForm').form('submit', {//鎻愪氦ID涓簃yForm鐨勮〃鍗�
							url : "ok.result",//鎻愪氦璺緞鍦板潃
							onSubmit : function() {//鎻愪氦鏃剁粦瀹氱殑鍑芥暟
							},//鎻愪氦鏃跺嚱鏁扮粨鏉�
							success : function(data) {//鎻愪氦鎴愬姛鍥炶皟鍑芥暟 鍙傛暟data涓哄搷搴斾俊鎭�
								if (data == "ok") {//鍒ゆ柇鍝嶅簲鍐呭鏄惁涓簅k
									//鏇存柊grid
									//$('#proDataGrid').datagrid("reload");
									//璋冪敤鏁版嵁琛ㄦ牸鎺т欢鐨刬nsertRow鍑芥暟娣诲姞涓�
									$('#proDataGrid').datagrid('insertRow', {
										index : 0, // 绱㈠紩浠�寮�
										row : {//琛屾暟鎹�
											stuID : $("#stuID").val(),
											stuName : $("#stuName").val(),
											stuAge : $("#stuAge").val()
										}
									//琛屾暟鎹粨鏉�
									});//娣诲姞涓�鐨勬柟娉曠粨鏉�
									$('#handlerDialog').dialog("close");//鍏抽棴妯℃�妗�
								}//鍝嶅簲涓篛K鐨勫垽鏂粨鏉�
							}//鎻愪氦鎴愬姛鍥炶皟鍑芥暟缁撴潫
						});//form琛ㄥ崟鎻愪氦缁撴潫
					}//鎸夐挳缁戝畾鍑芥暟缁撴潫
				}, {//鍙堜竴涓寜閽�
					text : '鍙栨秷',//鍐呭涓哄彇娑�
					handler : function() {//鎸夐挳缁戝畾鐨勫嚱鏁�
						alert("鍙栨秷");//寮规鎻愮ず
						$('#handlerDialog').dialog("close");//鍏抽棴璇ユā鎬佹
					}//缁戝畾鍑芥暟缁撴潫
				} ]
			//鎸夐挳缁勭粨鏉�
			});//妯℃�妗嗘帶浠剁粨鏉�
			//------------------鍗庝附涓界殑鍒嗗壊绾�----------------------
			$('#proDataGrid').datagrid({//鏁版嵁琛ㄦ牸鎺т欢
				url : 'datagrid_data1.json',//鏁版嵁琛ㄦ牸涓暟鎹潵婧�
				fitColumns : true,//鐪熸鐨勮嚜鍔ㄥ睍寮�鏀剁缉鍒楃殑澶у皬锛屼互閫傚簲缃戞牸鐨勫搴︼紝闃叉姘村钩婊氬姩
				striped : true,//鏄惁鏄剧ず鏂戦┈绾挎晥鏋�
				fit : true,//鑷�搴斿钩閾�
				//rownumbers : true,//濡傛灉涓簍rue锛屽垯鏄剧ず涓�釜琛屽彿鍒�
				singleSelect : false,//濡傛灉涓簍rue锛屽垯鍙厑璁搁�鎷╀竴琛�
				pagination : true,//濡傛灉涓簍rue锛屽垯鍦―ataGrid鎺т欢搴曢儴鏄剧ず鍒嗛〉宸ュ叿鏍�
				//pageSize : 20,//鍦ㄨ缃垎椤靛睘鎬х殑鏃跺�鍒濆鍖栭〉闈㈠ぇ灏�
				//pageList : [ 20, 40, 60 ],//鍦ㄨ缃垎椤靛睘鎬х殑鏃跺� 鍒濆鍖栭〉闈㈠ぇ灏忛�鎷╁垪琛�
				toolbar : "#toolbar",//瀹氫箟宸ュ叿缁�
				/* frozenColumns : [ [ {//灏嗗睘鎬у喕缁撳湪宸︿晶
					field : 'stuID',//鏁版嵁灞炴�鍚�
					title : '瀛︾敓缂栧彿',//琛ㄦ牸涓殑鍒楀悕
					width : 200//瀹藉害
				}
				] ], *///鍐荤粨灞炴�缁勭粨鏉�
				columns : [ [//DataGrid鍒楅厤缃璞�
				{//灏嗗睘鎬у喕缁撳湪宸︿晶
					field : 'stuID',//鏁版嵁灞炴�鍚�
					title : '瀛︾敓缂栧彿',//琛ㄦ牸涓殑鍒楀悕
					width : 200
				//瀹藉害
				}, {//涓�粍
					field : 'stuName',//鏁版嵁灞炴�鍚�
					title : '濮撳悕',//琛ㄦ牸涓殑鍒楀悕
					width : 200,//瀹藉害
				}, {//涓�粍
					field : 'stuAge',//鏁版嵁灞炴�鍚�
					title : '骞撮緞',//琛ㄦ牸涓殑鍒楀悕
					width : 200
				//瀹藉害
				} ] ]
			//鎺т欢灞炴�缁撴潫
			});//鏁版嵁琛ㄦ牸鎺т欢缁撴潫
		});//鍔犺浇鏃跺尶鍚嶅嚱鏁扮粨鏉�
	</script>
</body>
</html>